<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../css/themes.css/theme-1.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Banksia Pages</title>
</head>

<body>
    <!-- Add Firebase SDK for Banksia Pages Database -->
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-auth-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD6KA0ECIAB3scXNUu7mxgjmbmnhjOSEVc",
            authDomain: "banksia-pages-database.firebaseapp.com",
            projectId: "banksia-pages-database",
            storageBucket: "banksia-pages-database.appspot.com",
            messagingSenderId: "239610874789",
            appId: "1:239610874789:web:80bcede53d7ef4ba26764c",
            measurementId: "G-JV3QXR7P2H"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const userId = '#'; // Replace with your actual user ID

        // User document reference
        const userRef = db.collection('UserData').doc(userId);

        // User Information
        // Fetch user data from Firestore
        userRef.get().then((doc) => {
            if (doc.exists) {
                // Get user data from the document
                const userData = doc.data();

                // Update HTML elements with user data
                const profilePic = document.querySelector('.profile-pic-container img');
                profilePic.src = userData.profilePicURL; // Update profile picture

                const blogUsername = document.querySelector('.blog_username');
                blogUsername.textContent = userData.username; // Update username

                const blogBio = document.querySelector('.blog_bio');
                blogBio.textContent = userData.bio; // Update bio
            } else {
                console.log('No such document!');
            }
        }).catch((error) => {
            console.log('Error getting document:', error);
        });

        // Create Post
        const createPostForm = document.getElementById('create-post-form');

        createPostForm.addEventListener('submit', (e) => {
            e.preventDefault();

            // Get input values
            const postTitle = document.getElementById('post-title').value;
            const postContent = document.getElementById('post-content').value;

            // Add post to Firestore
            db.collection('posts').add({
                title: postTitle,
                content: postContent,
                // Add other post details as needed
                // You might want to include author ID, timestamp, etc.
            })
                .then((docRef) => {
                    console.log('Post added with ID: ', docRef.id);
                    // Clear form after successful submission
                    createPostForm.reset();
                })
                .catch((error) => {
                    console.error('Error adding post: ', error);
                });
        });

        // Sign Out
        const signOutButton = document.getElementById('signout');

        signOutButton.addEventListener('click', () => {
            firebase.auth().signOut().then(() => {
                console.log('Signed out successfully.');
                // Redirect or update UI as needed after sign out
            }).catch((error) => {
                console.error('Sign out error: ', error);
            });
        });
    </script>

    <!-- Top Navigation Bar -->
    <nav class="top-nav" id="navbar">
        <a class="nav-title" href="#">Banksia<b>Pages</b></a>
        <div class="header-buttons">
            <!-- When user is signed-in add sign out function-->
            <a href="#">Sign In</a>
            <!-- Sign out will replace sign in when user is logged in commented out currently
            <a href="#">Sign Out</a> -->
        </div>
        <div class="header-links">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="blogslist.html">Blogs</a></li>
                <li><a href="about.html">About</a></li>
            </ul>
        </div>
    </nav>

    <!-- menu class will be on left side with user info-->
    <div class="container-grid">
        <menu class="panel-left">
            <div class="profile-info-container">

                <!-- Link user info to database so it pulls user image instead of pre-selected image in code-->

                <div class="profile-pic-container">
                    <img src="../img/profile_img/BanksiaAvis/BanksiaAvi6.png" alt="Profile Picture">
                </div>

                <h1 class="blog_username">
                    John Doe's Blog
                </h1>

                <div class="blog_bio">
                    John Doe is the first user(not really) for Banksia Pages. He is a very cool guy and likes to write,
                    he is the volunteer for the first blog post and framework for color schemes you'll see in our
                    themes!

                    <div class="create-post">
                        <h2><a href="../createpost.html">Create Post</a></h2>
                    </div>
        </menu>


        <!-- Blog Post Template -->
        <main class="blog-list">
            <div class="blog-post-header">
                <div class="blog-post-title">
                    <h1>"Unveiling the Myth: Exploring the Secrets of Timelessness"</h1>
                </div>
                <div class="blog-post-author">
                    <p>Author: John Doe</p>
                </div>
                <!-- Dynamic date from the database -->
                <div class="blog-post-date">
                    <p>Date: January 1, 2023</p>
                </div>
                <div class="blog-post-body">
                    <!-- Dynamic content will be inserted here -->
                    In the labyrinth of existence, time remains an enigmatic force, its secrets shrouded in the veils of
                    eternity. "Unveiling the Myth: Exploring the Secrets of Timelessness" embarks on a voyage through
                    the ethereal realms of time, deciphering its elusive nature. From the cosmic dance of seconds to the
                    timeless whispers of history, this expedition ventures beyond conventional confines. Delving into
                    the depths of philosophy, science, and human perception, it seeks to unravel the timeless tapestry
                    that weaves past, present, and future. Join this odyssey as we navigate the unfathomable currents of
                    time, illuminating the mystique that renders it eternal.
                </div>

                <div class="blog-comments-section">
                    <h2>Blog Comments</h2>
                    <!-- Display existing comments -->
                    <div class="existing-comments">
                        <!-- Dynamic comments will be displayed here -->
                    </div>
                    <div class="view-comments-button">
                        <button type="button">View All Comments</button>
                    </div>
                    <div class="view-full-posts">
                        <button type="button" class="load-more-button">View Post</button>
                    </div>
                </div>
            </div>
        </main>
        <script src="js/auth-listener.js"></script>
        <!-- Footer -->
        <footer>
            <p>&copy; 2023 Banksia Pages. All rights reserved.</p>
        </footer>

</body>

</html>