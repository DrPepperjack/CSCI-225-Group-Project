<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../css/blog_template.css/blog-temp.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Banksia Pages</title>
</head>

<body>

    <!-- Add Firebase SDK for Banksia Pages Database -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD6KA0ECIAB3scXNUu7mxgjmbmnhjOSEVc",
            authDomain: "banksia-pages-database.firebaseapp.com",
            projectId: "banksia-pages-database",
            storageBucket: "banksia-pages-database.appspot.com",
            messagingSenderId: "239610874789",
            appId: "1:239610874789:web:80bcede53d7ef4ba26764c",
            measurementId: "G-JV3QXR7P2H"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Assuming you have a specific user ID (for demonstration purposes)
        const userId = 'user123'; // Replace with your actual user ID

        // User document reference
        const userRef = db.collection('users').doc(userId);

        // User Information
        // Fetch user data from Firestore
        userRef.get().then((doc) => {
            if (doc.exists) {
                // Get user data from the document
                const userData = doc.data();

                // Update HTML elements with user data
                const profilePic = document.querySelector('.profile-pic-container img');
                profilePic.src = userData.profilePicURL; // Update profile picture

                const blogUsername = document.querySelector('.blog_username');
                blogUsername.textContent = userData.username; // Update username

                const blogBio = document.querySelector('.blog_bio');
                blogBio.textContent = userData.bio; // Update bio
            } else {
                console.log('No such document!');
            }
        }).catch((error) => {
            console.log('Error getting document:', error);
        });

        // Create Post
        const createPostForm = document.getElementById('create-post-form');

        createPostForm.addEventListener('submit', (e) => {
            e.preventDefault();

            // Get input values
            const postTitle = document.getElementById('post-title').value;
            const postContent = document.getElementById('post-content').value;

            // Add post to Firestore
            db.collection('posts').add({
                title: postTitle,
                content: postContent,
                // Add other post details as needed
                // You might want to include author ID, timestamp, etc.
            })
                .then((docRef) => {
                    console.log('Post added with ID: ', docRef.id);
                    // Clear form after successful submission
                    createPostForm.reset();
                })
                .catch((error) => {
                    console.error('Error adding post: ', error);
                });
        });

        // Sign Out
        const signOutButton = document.getElementById('signout');

        signOutButton.addEventListener('click', () => {
            firebase.auth().signOut().then(() => {
                console.log('Signed out successfully.');
                // Redirect or update UI as needed after sign out
            }).catch((error) => {
                console.error('Sign out error: ', error);
            });
        });
    </script>

    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <a class="nav-title" href="#">Banksia<b>Pages</b></a>
        <div class="header-buttons">
            <!-- When user is signed-in add sign out function-->
            <a href="#">Sign In</a>
            <!-- Sign out will replace sign in when user is logged in commented out currently
            <a href="#">Sign Out</a> -->
        </div>
        <div class="header-links">
            <ul>
                <li><a href="BanksiaPages.html">Home</a></li>
                <li><a href="blogslist.html">Blogs</a></li>
                <li><a href="about.html">About</a></li>
            </ul>
        </div>
    </nav>

    <!-- menu class will be on left side with user info-->
    <div class="container-grid">
        <menu class="panel-left">
            <div class="profile-info-container">

                <!-- Link user info to database so it pulls user image instead of pre-selected image in code-->

                <div class="profile-pic-container">
                    <img src="../img/profile_img/BanksiaAvis/BanksiaAvi6.png" alt="Profile Picture">
                </div>

                <h1 class="blog_username">
                    John Doe's Blog
                </h1>

                <div class="blog_bio">
                    John Doe is the first user(not really) for Banksia Pages. He is a very cool guy and likes to write
                </div>

                <!-- Commented out until reformat of add post- D'Andre L.
            <aside class="sidebar">
                <div class="create-post">
                    <h2>Create Post</h2>
                    <form id="create-post-form">
                        <label for="post-title">Title:</label>
                        <input type="text" id="post-title" name="post-title" required><br><br>
                        <label for="post-content">Content:</label><br>
                        <textarea id="post-content" name="post-content" rows="4" cols="4" required></textarea><br><br>
                        <button type="submit">Submit</button>
                    </form>
                </div>
            </aside>
        -->
            </div>
        </menu>


        <!-- Blog Post Template -->
        <main class="blog-list">
            <div class="container">
                <div class="blog-post-header">
                    <h1>Title of the Blog Post</h1>
                    <p>Author: John Doe</p>
                    <p>Date: January 1, 2023</p>

                    <div class="blog-post-body">
                        <!-- Blog post body content -->
                    </div>

                    <div class="blog-comments-section">
                        <h2>Comments</h2>
                        <!-- Display existing comments -->
                        <div class="existing-comments">
                            <!-- Each comment could be structured within its own div -->
                            <div class="comment">
                                <p>User A: This is a great post!</p>
                            </div>
                            <div class="comment">
                                <p>User B: I found this very helpful. Thanks!</p>
                            </div>
                            <div class="view-comments-button">
                                <button type="button">View All Comments</button>
                            </div>

                            <!-- Form for users to submit new comments
                            <form id="comment-form">
                                <label for="user-name">Name:</label>
                                <input type="text" id="user-name" name="user-name" required><br><br>
                                <label for="user-comment">Comment:</label><br>
                                <textarea id="user-comment" name="user-comment" rows="4" cols="50"
                                    required></textarea><br><br>
                                <button type="submit">Submit</button>
                            </form>
                            -->
                        </div>
                    </div>
                </main>
</body>

</html>